<?xml version="1.0" encoding="utf-8"?>
<templates>
 <template type="public" title="ap_daily_goal_widget" version_id="1020100" version_string="1.2.1"><![CDATA[<xf:if is="$xf.visitor.hasPermission('general', 'ap_can_view_daily_goal')">
<xf:css src="ap_progress_bar.less" />

<div class="block block--progress" {{ widget_data($widget) }}>
    <div class="block-container">
        <h3 class="block-minorHeader">{{ phrase('ap_daily_goal') }}</h3>
		<xf:set var="$p" value="{$xf.simpleCache.getSet('apathy/DailyGoal').count}" />
		<xf:set var="$t" value="{$xf.simpleCache.getSet('apathy/DailyGoal').threadCount}" />
		<xf:set var="$m" value="{$xf.simpleCache.getSet('apathy/DailyGoal').memberCount}" />
		<xf:set var="$pp" value="{{ ($p / $xf.options.ap_goal) * 100 }}" />
		<xf:set var="$tp" value="{{ ($t / $xf.options.ap_thread_goal) * 100 }}" />
		<xf:set var="$mp" value="{{ ($m / $xf.options.ap_member_goal) * 100 }}" />
		
        <ul class="block-body">
			<li class="block-row">
				<xf:if is="!$xf.options.ap_disable_post_goal && $xf.visitor.hasPermission('general', 'ap_can_view_goal')">
					{{ phrase('posts') }}
					<xf:if is="$p >= $xf.options.ap_goal">
						<span style="float:right;"><span style="color:green;">{$p}</span>/{$xf.options.ap_goal}</span>
					<xf:else />
						<span style="float:right;"><span style="color:red;">{$p}</span>/{$xf.options.ap_goal}</span>
					</xf:if>
					<div class="progress-bar">
						<div class="progress-width" style="width: {$pp}%;">
							<p class="progress-percent">{$pp}%</p>
						</div>
					</div>
				</xf:if>
				
				<xf:if is="!$xf.options.ap_disable_thread_goal && $xf.visitor.hasPermission('general', 'ap_can_view_tgoal')">
				<div style="padding-top:4px;">
					{{ phrase('threads') }}
					<xf:if is="$t >= $xf.options.ap_thread_goal">
						<span style="float:right;"><span style="color:green;">{$t}</span>/{$xf.options.ap_thread_goal}</span>
					<xf:else />
						<span style="float:right;"><span style="color:red;">{$t}</span>/{$xf.options.ap_thread_goal}</span>
					</xf:if>
					<div class="progress-bar">
						<div class="progress-width" style="width: {$tp}%;">
							<p class="progress-percent">{$tp}%</p>
						</div>
					</div>
				</div>
				</xf:if>
				
				<xf:if is="!$xf.options.ap_disable_member_goal && $xf.visitor.hasPermission('general', 'ap_can_view_mgoal')">
				<div style="padding-top:4px;">
					{{ phrase('members') }}
					<xf:if is="$m >= $xf.options.ap_member_goal">
						<span style="float:right;"><span style="color:green;">{$m}</span>/{$xf.options.ap_member_goal}</span>
					<xf:else />
						<span style="float:right;"><span style="color:red;">{$m}</span>/{$xf.options.ap_member_goal}</span>
					</xf:if>
					<div class="progress-bar">
						<div class="progress-width" style="width: {$mp}%;">
							<p class="progress-percent">{$mp}%</p>
						</div>
					</div>
				</div>
				</xf:if>
			</li>
		</ul>
    </div>
</div>
</xf:if>]]></template>

 <template type="public" title="ap_progress_bar.less" version_id="1020100" version_string="1.2.1"><![CDATA[/* From Russ on Xenforo
   https://xenforo.com/community/threads/does-this-add-on-exist-profile-progression.168788/#post-1368520 */

.block--progress
{
    .progress-bar
    {
        margin-bottom: @xf-paddingLarge;
        width:100%;
        height:30px;
        overflow:hidden;
        background: {{ property('ap_daily_goal_bar_bg') }} !important;
        border-radius: @xf-borderRadiusLarge;
    }
    .progress-width
    {
        position:relative;
        float:left;
        height:100%;
        background-image: linear-gradient(-45deg, rgba(255, 255, 255, 0.125) 25%, rgba(0, 0, 0, 0) 25%, rgba(0, 0, 0, 0) 50%, rgba(255, 255, 255, 0.125) 50%, rgba(255, 255, 255, 0.125) 75%, rgba(0, 0, 0, 0) 75%, rgba(0, 0, 0, 0));
        background-size: 35px 35px;
        background-color: {{ property('ap_daily_goal_bar_color') }} !important;
    }
    .progress-percent
    {
        position:absolute;
        top:50%;
        left:50%;
        transform:translate(-50%,-50%);
        margin:0;
        color:white;
    }
    .progress-complete
    {
        text-decoration: line-through;
    }
    .progress-footer
    {
        margin-top: @xf-paddingLarge;
    }
}]]></template>
</templates>
